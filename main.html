<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hangman</title>
</head>

<body>
    <p>DEFINITION(HINT)</p>
    <p id="wordDefID"></p>

    <p>ANSWER(TESTING)</p>
    <p id="answerID"></p>

    <p>ANSWER(Chr Ver)</p>
    <p id="answerChrID"></p>

    <p>LIFE</p>
    <p id="lifeID">7</p>

    <p>YOUR GUESS</p>
    <p id="guessID">YOUR GUESS?</p>

    <script>
        // for the testing purpose, only 4 words in the array.
        let tattoo = "a form of body modification where a design is made by inserting ink";
        let electricity = "the set of physical phenomena associated with the presence and motion of electric charge"
        let committee = "a group of people chosen to do a particular job, make decisions"
        let system = "a group of related parts that work together as a whole for a particular purpose"

        let arrayOfAnswers = ["TATTOO", "ELECTRICITY", "COMMITTEE", "SYSTEM"];
        let arrayOfDefs = [tattoo, electricity, committee, system];
        let answerChr = [];

        let arrayOfGuesses = [];
        let userGuess = "";

        let lives = 7;

        function generateButton() {
            let temp = disPlayDefinition();
            let temp2 = AnswerChrLeng(temp)
            for (let i = 0; i < 26; i++) {
                let creadtedButton = new Button(i)
                creadtedButton.btn.innerHTML = String.fromCharCode(i + 65);
                // console.log("AnswerChrLeng(temp) : " + temp2); // ---> return list
                creadtedButton.btn.onclick = function () {
                    for (let j = 0; j < 26; j++) {
                        if (creadtedButton.btn.id == j) {
                            arrayOfGuesses.push(String.fromCharCode(j + 65));
                            creadtedButton.btn.style.visibility = "hidden";
                        }
                    }
                    guess(temp2);
                    document.getElementById("guessID").innerHTML = arrayOfGuesses;
                    gameOver();
                }
            }
        }

        function Button(id) {
            this.id = id;
            this.btn = document.createElement("button");
            this.btn.id = `${this.id}`;
            this.btn.style.width = "50px";
            this.btn.style.height = "50px";
            document.body.appendChild(this.btn);
        }

        function disPlayDefinition() {
            let i = Math.floor(Math.random() * 4);  // i: 0~3 for the testing purpose
            document.getElementById("wordDefID").innerHTML = arrayOfDefs[i];
            document.getElementById("answerID").innerHTML = arrayOfAnswers[i];
            return i;
        }


        function AnswerChrLeng(i) {
            for (let j = 0; j < arrayOfAnswers[i].length; j++) {
                answerChr[j] = arrayOfAnswers[i][j];
                // console.log(answerChr);
            }
            document.getElementById("answerChrID").innerHTML = answerChr;
            return answerChr;  // answerChr --> list
        }

        let guessCount = 0;
        function guess(answerChr) {  // answerChr ---> list
            for (let i = 0; i < answerChr.length; i++) {
                if (arrayOfGuesses[guessCount] === answerChr[i]) {
                    console.log(arrayOfGuesses)
                    console.log(arrayOfGuesses[guessCount])
                    earnScore();
                    guessCount++;
                    break;
                }
                else {
                    console.log(arrayOfGuesses)
                    console.log(arrayOfGuesses[guessCount])
                    loseScore();
                    guessCount++;
                    break;
                }
            }
        }


        function earnScore() {
            document.getElementById("lifeID").innerHTML = ++lives;
        }

        function loseScore() {
            document.getElementById("lifeID").innerHTML = --lives;
        }

        function gameOver() {
            if (lives == 0) {
                document.getElementById("guessID").innerHTML = "Game Over! " + prompt("Please enter your name.") + ", your score is " + lives + ".";
            }
        }
        
        
        // function restart() {

        // }


        function main() {
            generateButton();
        }

        main();

    </script>

</body>

</html>